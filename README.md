<div align="center">

# ğŸ“± AfterClose

### Local-First ç›¤å¾Œå¸‚å ´æƒæ App

**Scan the entire market after close. See what changed â€” without noise.**

[![Flutter](https://img.shields.io/badge/Flutter-3.38-02569B?logo=flutter)](https://flutter.dev)
[![Dart](https://img.shields.io/badge/Dart-3.10-0175C2?logo=dart)](https://dart.dev)
[![License](https://img.shields.io/badge/License-Private-red)]()

</div>

---

> **å®šä½ä¸€å¥è©±**
> æ”¶ç›¤å¾Œï¼ŒæŠŠæ•´å€‹å¸‚å ´æƒä¸€éï¼Œåªç•™ä¸‹ã€Œä»Šå¤©è·Ÿå¹³å¸¸ä¸ä¸€æ¨£çš„åœ°æ–¹ã€ã€‚

---

## ğŸ“‹ ç›®éŒ„

- [æ ¸å¿ƒç«‹å ´](#-æ ¸å¿ƒç«‹å ´)
- [ç”¢å“ç¯„åœ](#-ç”¢å“ç¯„åœ)
- [åŠŸèƒ½éª¨æ¶](#-åŠŸèƒ½éª¨æ¶)
- [åˆ†æè¼¸å‡ºæ¨¡å‹](#-åˆ†æè¼¸å‡ºæ¨¡å‹)
- [æ¨è–¦ç³»çµ±](#-æ¨è–¦ç³»çµ±)
- [æ›´æ–°ç®¡ç·š](#-æ›´æ–°ç®¡ç·š)
- [æŠ€è¡“é¸å‹](#-æŠ€è¡“é¸å‹)
- [è³‡æ–™è¨­è¨ˆ](#-è³‡æ–™è¨­è¨ˆ)
- [UI çµæ§‹](#-ui-çµæ§‹)
- [å®Œæˆæ¨™æº–](#-å®Œæˆæ¨™æº–)

### ğŸ“š å»¶ä¼¸æ–‡ä»¶

| æ–‡ä»¶                                          | èªªæ˜                             |
|:--------------------------------------------|:-------------------------------|
| [Rule Engine & Schema](docs/RULE_ENGINE.md) | æ¨è–¦è¦å‰‡å¼•æ“ v1 + SQLite Schema å®Œæ•´å®šç¾© |

---

## ğŸ¯ æ ¸å¿ƒç«‹å ´

> é€™äº›ä¸è¨è«–ã€ä¸åæ‚”

| åŸå‰‡            | èªªæ˜                       |
|:--------------|:-------------------------|
| **On-Device** | æ‰€æœ‰è³‡æ–™æŠ“å–ã€åˆ†æã€æ¨è–¦ **éƒ½åœ¨è£ç½®ç«¯å®Œæˆ** |
| **é›¶å›ºå®šæˆæœ¬**     | å…è²» API + RSS + æœ¬åœ° SQLite |
| **ç›¤å¾Œæ‰¹æ¬¡**      | åªè™•ç†ã€Œå·²æ”¶ç›¤ã€çš„æ—¥è³‡æ–™             |
| **ä¸åšæŠ•é¡§**      | ä¸çµ¦è²·è³£ã€ä¸çµ¦é æ¸¬ã€ä¸çµ¦æƒ…ç·’           |
| **æ¨è–¦ = ç•°å¸¸æç¤º** | å‘Šè¨´ä½ ã€Œå“ªè£¡æ€ªæ€ªçš„ã€ï¼Œä¸æ˜¯ã€Œè©²æ€éº¼åšã€      |
| **çµæœå¯å› äººè€Œç•°**   | ä¾æ›´æ–°æ™‚é–“ã€è£ç½®ç‹€æ…‹è€Œç•° â†’ å¯æ¥å—       |

---

## ğŸ“¦ ç”¢å“ç¯„åœ

### ä½¿ç”¨æƒ…å¢ƒï¼ˆå”¯ä¸€ä¸»ç·šï¼‰

```mermaid
flowchart LR
    A[æ”¶ç›¤å¾Œ] --> B[æ‰“é–‹ AfterClose]
    B --> C{3-5 åˆ†é˜å…§}
    C --> D[ä»Šå¤©å¸‚å ´ç™¼ç”Ÿä»€éº¼]
    C --> E[å“ªäº›è‚¡ç¥¨è·Ÿå¹³å¸¸ä¸ä¸€æ¨£]
    C --> F[è‡ªå·±é—œæ³¨çš„æœ‰æ²’æœ‰äº‹]
```

---

## ğŸ—ï¸ åŠŸèƒ½éª¨æ¶

### Daily Updateï¼ˆæ ¸å¿ƒï¼‰

- âœ… æ‰‹å‹•æ›´æ–°ï¼ˆä¸»è·¯å¾‘ï¼‰
- âœ… è‡ªå‹•æ›´æ–°ï¼ˆå‰æ™¯ + èƒŒæ™¯ best-effortï¼‰
- æ›´æ–°å…§å®¹ï¼š
  - å°è‚¡ OHLCVï¼ˆæ—¥ï¼‰
  - æ³•äººï¼ˆå¯é¸ï¼‰
  - æ–°è RSS metadata

### Todayï¼ˆé¦–é ï¼‰

- å¸‚å ´ä¸€å¥è©±æ‘˜è¦ï¼ˆæ¨¡æ¿ï¼‰
- ä»Šæ—¥æ¨è–¦ Top 10
- è‡ªé¸æ¸…å–®ç‹€æ…‹ï¼ˆğŸ”¥ / ğŸ‘€ / ğŸ˜´ï¼‰
- ç¾è‚¡èƒŒæ™¯ï¼ˆå¯é¸ï¼ŒæŒ‡æ•¸ï¼‰

### Scanï¼ˆå¸‚å ´æƒæï¼‰

- ä¸Šå¸‚ + ä¸Šæ«ƒå…¨å¸‚å ´
- æ’åºä¾æ“šï¼š**score**
- ç¯©é¸ï¼šå¼±è½‰å¼· / å¼·è½‰å¼± / çªç ´ / è·Œç ´ / æ”¾é‡

### Stock Detailï¼ˆå–®ä¸€è‚¡ç¥¨ï¼‰

| å€å¡Š    | å…§å®¹                |
|:------|:------------------|
| ç›¤å¾Œäº‹å¯¦  | OHLCV             |
| è¶¨å‹¢ç‹€æ…‹  | UP / DOWN / RANGE |
| è½‰æŠ˜ç‹€æ…‹  | W2S / S2W         |
| é—œéµåƒ¹ä½  | æ”¯æ’ / å£“åŠ›           |
| æ¨è–¦ç†ç”±  | æœ€å¤š 2 æ¢            |
| æ–°è/äº‹ä»¶ | RSS ä¾†æº            |
| ç§æœ‰è³‡æ–™  | ç­–ç•¥å¡ + ç­†è¨˜          |

---

## ğŸ“Š åˆ†æè¼¸å‡ºæ¨¡å‹

### æŠ€è¡“é¢ï¼ˆçµæ§‹ï¼Œä¸æ˜¯æŒ‡æ¨™ï¼‰

```mermaid
graph TD
    subgraph TrendState
        UP
        DOWN
        RANGE
    end

    subgraph ReversalState
        W2S[W2S å¼±è½‰å¼·]
        S2W[S2W å¼·è½‰å¼±]
    end

    subgraph KeyLevels
        Support[æ”¯æ’]
        Resistance[å£“åŠ›]
    end
```

### ç±Œç¢¼é¢ï¼ˆå¯é¸ï¼‰

- æ³•äººè²·è³£è¶…
- æ–¹å‘æ˜¯å¦åè½‰

### åŸºæœ¬é¢ï¼ˆåªåšäº‹ä»¶ï¼‰

- è²¡å ± / æ³•èªª / é™¤æ¬Šæ¯
- æœ‰ â†’ æ¨™è¨˜ | æ²’ â†’ ä¸é¡¯ç¤º

---

## ğŸ”” æ¨è–¦ç³»çµ±

> Rule Engine v1 â€” **Attention Alert**ï¼Œä¸æ˜¯é¸è‚¡ã€ä¸æ˜¯é æ¸¬

### è¼¸å‡ºè¦å‰‡

| ç¯„åœ   | é™åˆ¶             |
|:-----|:---------------|
| æ¯æª”è‚¡ç¥¨ | æœ€å¤š **2 æ¢ç†ç”±**   |
| æ¯æ—¥æ¨è–¦ | Top **10 æª”**   |
| ç†ç”±æ ¼å¼ | é¡åˆ¥ + è­‰æ“šï¼ˆæ•¸å­—/åƒ¹ä½ï¼‰ |

### ç†ç”±é¡å‹

| é¡å‹                    | èªªæ˜       |
|:----------------------|:---------|
| `REVERSAL_W2S`        | å¼±è½‰å¼·      |
| `REVERSAL_S2W`        | å¼·è½‰å¼±      |
| `TECH_BREAKOUT`       | æŠ€è¡“çªç ´     |
| `TECH_BREAKDOWN`      | æŠ€è¡“è·Œç ´     |
| `VOLUME_SPIKE`        | çˆ†é‡       |
| `PRICE_SPIKE`         | åƒ¹æ ¼ç•°å‹•     |
| `INSTITUTIONAL_SHIFT` | æ³•äººè½‰å‘ï¼ˆå¯é¸ï¼‰ |
| `NEWS_RELATED`        | æ–°èç›¸é—œï¼ˆå¯é¸ï¼‰ |

### å‰è»Šæ©Ÿåˆ¶

- åŒè‚¡é€£çºŒå‡ºç¾ â†’ é™æ¬Š
- åŒé¡ç†ç”±å»é‡
- ä¸è®“æ¨è–¦æ¦œè®Šæˆã€Œæ”¾é‡æ’è¡Œæ¦œã€

---

## ğŸ”„ æ›´æ–°ç®¡ç·š

> Local-First è¨­è¨ˆ â€” æ¯ä¸€æ­¥éƒ½è¦å¯è½åœ°ã€å¯ä¸­æ–·ã€å¯çºŒè·‘

```mermaid
flowchart TD
    A[1. åˆ¤æ–·äº¤æ˜“æ—¥] --> B[2. æ›´æ–° Stock Master]
    B --> C[3. æ‹‰ç•¶æ—¥åƒ¹æ ¼]
    C --> D[4. æ‹‰æ³•äººè³‡æ–™]
    D --> E[5. æ‹‰ RSS æ–°è]
    E --> F[6. ç¯©é¸å€™é¸è‚¡ç¥¨]
    F --> G[7. è·‘åˆ†æ]
    G --> H[8. å¥—ç”¨è¦å‰‡å¼•æ“]
    H --> I[9. ç”¢ç”Ÿ Top 10]
    I --> J[10. æ¨™è¨˜å®Œæˆç‹€æ…‹]

    style A fill:#e1f5fe
    style J fill:#c8e6c9
```

### Candidate-first ç­–ç•¥

> å…¨å¸‚å ´ â‰  å…¨å¸‚å ´éƒ½æ·±ç®—

**v1 å€™é¸æ¢ä»¶ï¼ˆORï¼‰ï¼š**

- ç•¶æ—¥æ¼²è·Œå¹… â‰¥ 5%
- ç•¶æ—¥é‡ â‰¥ 20 æ—¥å‡é‡ Ã— 2
- æ¥è¿‘ 60 æ—¥é«˜ / ä½
- æ³•äººæ–¹å‘åè½‰ï¼ˆè‹¥æœ‰ï¼‰

---

## ğŸ› ï¸ æŠ€è¡“é¸å‹

### Stack

| é¡åˆ¥        | æŠ€è¡“                                      |
|:----------|:----------------------------------------|
| Framework | Flutter + Dart 3                        |
| State     | Riverpod                                |
| Database  | Drift (SQLite)                          |
| Network   | Dio                                     |
| Model     | freezed + json_serializable             |
| RSS       | xml                                     |
| èƒŒæ™¯ä»»å‹™      | Android: WorkManager / iOS: best-effort |

### è³‡æ–™ä¾†æº

| è³‡æ–™   | ä¾†æº                        |
|:-----|:--------------------------|
| å°è‚¡   | FinMind                   |
| ç¾è‚¡æŒ‡æ•¸ | Yahoo / Alpha Vantageï¼ˆå¯é¸ï¼‰ |
| æ–°è   | RSS                       |

---

## ğŸ’¾ è³‡æ–™è¨­è¨ˆ

### è¨­è¨ˆåŸå‰‡

| é¡å‹    | è¦å‰‡           |
|:------|:-------------|
| ç³»çµ±è³‡æ–™  | **ä¸å¯ä¿®æ”¹**ã€å¯å›æ”¾ |
| ä½¿ç”¨è€…è³‡æ–™ | æœ¬æ©Ÿç§æœ‰ã€å¯ä¿®æ”¹     |

### å¿…è¦è¡¨

```mermaid
erDiagram
    stock_master ||--o{ daily_price : has
    stock_master ||--o{ daily_analysis : has
    daily_analysis ||--o{ daily_reason : contains
    stock_master ||--o{ daily_recommendation : appears_in
    stock_master ||--o{ news_stock_map : mentioned_in
    news_item ||--o{ news_stock_map : maps

    stock_master ||--o{ watchlist : tracked_by
    stock_master ||--o{ user_note : annotated_by
    stock_master ||--o{ strategy_card : has_strategy

    update_run
```

---

## ğŸ“± UI çµæ§‹

```mermaid
flowchart TB
    subgraph TabBar["Tab Navigation"]
        direction LR
        T1["Today"]
        T2["Scan"]
        T3["Watchlist"]
        T4["News"]
    end

    subgraph Screens["Main Screens"]
        Today["Today Screen\nå¸‚å ´æ‘˜è¦ + Top 10"]
        Scan["Scan Screen\nå…¨å¸‚å ´æƒæ"]
        Watch["Watchlist Screen\nè‡ªé¸æ¸…å–®"]
        News["News Screen\næ–°èåˆ—è¡¨"]
    end

    Detail["Stock Detail\nå€‹è‚¡è©³æƒ…é "]

    T1 --> Today
    T2 --> Scan
    T3 --> Watch
    T4 --> News

    Today --> Detail
    Scan --> Detail
    Watch --> Detail
    News --> Detail

    style Detail fill:#fff3e0,stroke:#ff9800
    style TabBar fill:#e3f2fd
    style Screens fill:#f3e5f5
```

---

## âœ… å®Œæˆæ¨™æº–

> MVP Done â€” åšåˆ°é€™äº›ï¼Œå°±å·²ç¶“æ˜¯ã€Œé«˜å“è³ªä½œå“ã€

- [x] èƒ½åœ¨ä»»ä¸€è£ç½®å®Œæˆä¸€æ¬¡å®Œæ•´ç›¤å¾Œæ›´æ–°
- [x] èƒ½ç”¢ç”Ÿæ¯æ—¥ Top 10 æ¨è–¦
- [x] æ¯æª”æ¨è–¦éƒ½æœ‰ã€Œå¯è§£é‡‹ç†ç”±ã€
- [x] ä½¿ç”¨è€…å¯ç¶­è­·è‡ªå·±çš„è‡ªé¸èˆ‡ç­–ç•¥
- [x] å®Œå…¨æœ¬åœ°é‹ç®—ï¼Œç„¡éœ€é›²ç«¯æœå‹™

---

## âš ï¸ å…è²¬è²æ˜

> æœ¬æ‡‰ç”¨ç¨‹å¼åƒ…ä¾›è³‡è¨Šåƒè€ƒï¼Œä¸æ§‹æˆä»»ä½•æŠ•è³‡å»ºè­°ã€‚

### è¨­è¨ˆåŸå‰‡

| åŸå‰‡        | èªªæ˜              |
|:----------|:----------------|
| **å®¢è§€å‘ˆç¾**  | åƒ…å‘ˆç¾äº‹å¯¦èˆ‡æ•¸æ“šï¼Œä¸å¸¶ä¸»è§€åˆ¤æ–· |
| **ç„¡é æ¸¬æ€§**  | ä¸æä¾›åƒ¹æ ¼é æ¸¬æˆ–èµ°å‹¢åˆ¤æ–·    |
| **ç„¡å»ºè­°æ€§**  | ä¸æä¾›è²·è³£å»ºè­°æˆ–æ“ä½œæŒ‡å¼•    |
| **é€æ˜å¯è§£é‡‹** | æ‰€æœ‰æ¨è–¦çš†é™„å¸¶æ˜ç¢ºçš„è§¸ç™¼æ¢ä»¶  |

### ä½¿ç”¨è€…è²¬ä»»

- æ‰€æœ‰æŠ•è³‡æ±ºç­–æ‡‰ç”±ä½¿ç”¨è€…è‡ªè¡Œåˆ¤æ–·
- æœ¬æ‡‰ç”¨ç¨‹å¼ä¸å°ä»»ä½•æŠ•è³‡æç›Šè² è²¬
- è³‡æ–™ä¾†æºç‚ºå…¬é–‹ APIï¼Œä¸ä¿è­‰å³æ™‚æ€§èˆ‡æº–ç¢ºæ€§

---

<div align="center">

**AfterClose** â€” _See what changed, without noise._

</div>
